{"ast":null,"code":"import { asyncActionStart, asyncActionFinish, asyncActionError } from '../async/asyncActions';\nimport { LOGIN_USER } from './authConstants';\nexport const login = (creds, history) => {\n  return async (dispatch, getState) => {\n    try {\n      dispatch(asyncActionStart()); // const config = {\n      //   method: 'POST',\n      //   headers: {\n      //     \"Content-Type\": \"application/json\",\n      //   },\n      //   body: JSON.stringify({email:creds.login,password:creds.password}), \n      // };\n      // await fetch('/api/v3/merchant/user/login', config)\n\n      const response = await fetch('/api/v3/merchant/user/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email: creds.email,\n          password: creds.password\n        })\n      });\n      const body = await response.json();\n      localStorage.setItem('access_token', body.token);\n      dispatch({\n        type: LOGIN_USER,\n        payload: {\n          body\n        }\n      });\n      history.push('dashboard');\n      dispatch(asyncActionFinish());\n    } catch (error) {\n      dispatch(asyncActionError());\n      console.log(error);\n    }\n  };\n};","map":{"version":3,"sources":["/Users/hamdiceylan/Projects/financial-house-test/client/src/features/auth/authActions.js"],"names":["asyncActionStart","asyncActionFinish","asyncActionError","LOGIN_USER","login","creds","history","dispatch","getState","response","fetch","method","headers","body","JSON","stringify","email","password","json","localStorage","setItem","token","type","payload","push","error","console","log"],"mappings":"AAAA,SAASA,gBAAT,EAA2BC,iBAA3B,EAA8CC,gBAA9C,QAAsE,uBAAtE;AACA,SAASC,UAAT,QAA2B,iBAA3B;AAEA,OAAO,MAAMC,KAAK,GAAG,CAACC,KAAD,EAAOC,OAAP,KAAmB;AACpC,SAAO,OAAOC,QAAP,EAAiBC,QAAjB,KAA8B;AACnC,QAAI;AACFD,MAAAA,QAAQ,CAACP,gBAAgB,EAAjB,CAAR,CADE,CAEF;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AAMA,YAAMS,QAAQ,GAAG,MAAMC,KAAK,CAAC,6BAAD,EAAgC;AAC1DC,QAAAA,MAAM,EAAE,MADkD;AAE1DC,QAAAA,OAAO,EAAE;AACP,0BAAgB;AADT,SAFiD;AAK1DC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAACC,UAAAA,KAAK,EAACX,KAAK,CAACW,KAAb;AAAmBC,UAAAA,QAAQ,EAACZ,KAAK,CAACY;AAAlC,SAAf;AALoD,OAAhC,CAA5B;AAOA,YAAMJ,IAAI,GAAG,MAAMJ,QAAQ,CAACS,IAAT,EAAnB;AACAC,MAAAA,YAAY,CAACC,OAAb,CAAqB,cAArB,EAAqCP,IAAI,CAACQ,KAA1C;AACAd,MAAAA,QAAQ,CAAC;AAACe,QAAAA,IAAI,EAAEnB,UAAP;AAAkBoB,QAAAA,OAAO,EAAE;AAACV,UAAAA;AAAD;AAA3B,OAAD,CAAR;AACAP,MAAAA,OAAO,CAACkB,IAAR,CAAa,WAAb;AACAjB,MAAAA,QAAQ,CAACN,iBAAiB,EAAlB,CAAR;AACD,KA5BD,CA4BE,OAAMwB,KAAN,EAAY;AACZlB,MAAAA,QAAQ,CAACL,gBAAgB,EAAjB,CAAR;AACAwB,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD;AACF,GAjCD;AAkCH,CAnCM","sourcesContent":["import { asyncActionStart, asyncActionFinish, asyncActionError } from '../async/asyncActions'\nimport { LOGIN_USER } from './authConstants'\n\nexport const login = (creds,history) => {\n    return async (dispatch, getState) => {\n      try {\n        dispatch(asyncActionStart())\n        // const config = {\n        //   method: 'POST',\n        //   headers: {\n        //     \"Content-Type\": \"application/json\",\n        //   },\n        //   body: JSON.stringify({email:creds.login,password:creds.password}), \n        // };\n\n        // await fetch('/api/v3/merchant/user/login', config)\n\n\n\n\n\n        const response = await fetch('/api/v3/merchant/user/login', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({email:creds.email,password:creds.password})\n        });\n        const body = await response.json();\n        localStorage.setItem('access_token', body.token);\n        dispatch({type: LOGIN_USER,payload: {body}})\n        history.push('dashboard')\n        dispatch(asyncActionFinish())\n      } catch(error){\n        dispatch(asyncActionError())\n        console.log(error);\n      }\n    }\n};\n\n"]},"metadata":{},"sourceType":"module"}